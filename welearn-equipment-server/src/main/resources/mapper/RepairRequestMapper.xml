<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
  Table    : repair_request
  Comment  : 报修申请
  Mapper   : com.welearn.mapper.RepairRequestMapper
  Author   : Setsuna Jin build with CodeSmith 7.0
  CreateAt : 2019/2/23 15:10:58
-->
<mapper namespace="com.welearn.mapper.RepairRequestMapper">
  <!-- SQL 片段:所有字段 -->
  <sql id="sqlColumns" >
    id,
    createdAt,
    updatedAt,
    isEnable,
    equipmentId,
    equipmentName,
    equipmentTypeId,
    equipmentTypeName,
    guaranteeRepairExpiredAt,
    reporterId,
    reporterName,
    reporterPhone,
    reporterDepartmentId,
    reporterDepartmentName,
    reporterCompanyId,
    reporterCompanyName,
    serveCompanyId,
    serveCompanyName,
    preceptId,
    description,
    picture,
    lever,
    sort,
    status,
    isReal,
    isCancel,
    isPartRepalce,
    isPartWaiting,
    isHelpApply,
    isWarranty,
    isSummarize,
    remark,
    finishedAt,
    isSuggestScrap,
    isDegrade
  </sql>

  <!-- SQL 片段:所有字段（带表头和 AS） -->
  <sql id="sqlColumnsAs" >
    repair_request.id AS id,
    repair_request.createdAt AS createdAt,
    repair_request.updatedAt AS updatedAt,
    repair_request.isEnable AS isEnable,
    repair_request.equipmentId AS equipmentId,
    repair_request.equipmentName AS equipmentName,
    repair_request.equipmentTypeId AS equipmentTypeId,
    repair_request.equipmentTypeName AS equipmentTypeName,
    repair_request.guaranteeRepairExpiredAt AS guaranteeRepairExpiredAt,
    repair_request.reporterId AS reporterId,
    repair_request.reporterName AS reporterName,
    repair_request.reporterPhone AS reporterPhone,
    repair_request.reporterDepartmentId AS reporterDepartmentId,
    repair_request.reporterDepartmentName AS reporterDepartmentName,
    repair_request.reporterCompanyId AS reporterCompanyId,
    repair_request.reporterCompanyName AS reporterCompanyName,
    repair_request.serveCompanyId AS serveCompanyId,
    repair_request.serveCompanyName AS serveCompanyName,
    repair_request.preceptId AS preceptId,
    repair_request.description AS description,
    repair_request.picture AS picture,
    repair_request.lever AS lever,
    repair_request.sort AS sort,
    repair_request.status AS status,
    repair_request.isReal AS isReal,
    repair_request.isCancel AS isCancel,
    repair_request.isPartRepalce AS isPartRepalce,
    repair_request.isPartWaiting AS isPartWaiting,
    repair_request.isHelpApply AS isHelpApply,
    repair_request.isWarranty AS isWarranty,
    repair_request.isSummarize AS isSummarize,
    repair_request.remark AS remark,
    repair_request.finishedAt AS finishedAt,
    repair_request.isSuggestScrap AS isSuggestScrap,
    repair_request.isDegrade AS isDegrade
  </sql>

  <!-- ResultMap: 默认表结构 -->
  <resultMap id="resultMapDefault" type="com.welearn.entity.po.equipment.RepairRequest" >
    <!-- Comment: 主键 -->
    <id column="id" property="id"/>
    <!-- Comment: 创建时间 -->
    <result column="createdAt" property="createdAt"/>
    <!-- Comment: 更新时间 -->
    <result column="updatedAt" property="updatedAt"/>
    <!-- Comment: 是否可用：0-不可用，1-可用 -->
    <result column="isEnable" property="isEnable"/>
    <!-- Comment: 设备id -->
    <result column="equipmentId" property="equipmentId"/>
    <!-- Comment: 设备名称 -->
    <result column="equipmentName" property="equipmentName"/>
    <!-- Comment: 设备类型id -->
    <result column="equipmentTypeId" property="equipmentTypeId"/>
    <!-- Comment: 设备类型名称 -->
    <result column="equipmentTypeName" property="equipmentTypeName"/>
    <!-- Comment: 过保日期 -->
    <result column="guaranteeRepairExpiredAt" property="guaranteeRepairExpiredAt"/>
    <!-- Comment: 报修人id -->
    <result column="reporterId" property="reporterId"/>
    <!-- Comment: 报修人名称 -->
    <result column="reporterName" property="reporterName"/>
    <!-- Comment: 报修人电话 -->
    <result column="reporterPhone" property="reporterPhone"/>
    <!-- Comment: 报修人部门id -->
    <result column="reporterDepartmentId" property="reporterDepartmentId"/>
    <!-- Comment: 报修人部门名称 -->
    <result column="reporterDepartmentName" property="reporterDepartmentName"/>
    <!-- Comment: 报修人公司id -->
    <result column="reporterCompanyId" property="reporterCompanyId"/>
    <!-- Comment: 报修人公司名称 -->
    <result column="reporterCompanyName" property="reporterCompanyName"/>
    <!-- Comment: 服务公司id -->
    <result column="serveCompanyId" property="serveCompanyId"/>
    <!-- Comment: 服务公司名称 -->
    <result column="serveCompanyName" property="serveCompanyName"/>
    <!-- Comment: 故障预案 -->
    <result column="preceptId" property="preceptId"/>
    <!-- Comment: 故障描述 -->
    <result column="description" property="description"/>
    <!-- Comment: 故障图片 -->
    <result column="picture" property="picture"/>
    <!-- Comment: 紧急程度: 0-一般 1-严重 2-紧急 -->
    <result column="lever" property="lever"/>
    <!-- Comment: 优先级排序 -->
    <result column="sort" property="sort"/>
    <!-- Comment: 状态: 0-待派工 1-待重派 2-待领工 3-待维修 4-维修中 5-待验收 6-待评价 7-已完成 8-待取消 9-已取消 10-已中止 11-待厂商维修 12-待外援维修 -->
    <result column="status" property="status"/>
    <!-- Comment: 报修是否属实 -->
    <result column="isReal" property="isReal"/>
    <!-- Comment: 报修是否取消 -->
    <result column="isCancel" property="isCancel"/>
    <!-- Comment: 是否更换配件 -->
    <result column="isPartRepalce" property="isPartRepalce"/>
    <!-- Comment: 是否等待配件 -->
    <result column="isPartWaiting" property="isPartWaiting"/>
    <!-- Comment: 是否申请外派 -->
    <result column="isHelpApply" property="isHelpApply"/>
    <!-- Comment: 是否厂家保修 -->
    <result column="isWarranty" property="isWarranty"/>
    <!-- Comment: 是否提交总结 -->
    <result column="isSummarize" property="isSummarize"/>
    <!-- Comment: 备注:取消说明/中止说明 -->
    <result column="remark" property="remark"/>
    <!-- Comment: 完成时间(用户确认维修完成的时间) -->
    <result column="finishedAt" property="finishedAt"/>
    <!-- Comment: 是否建议报废 -->
    <result column="isSuggestScrap" property="isSuggestScrap"/>
    <!-- Comment: 是否降级使用 -->
    <result column="isDegrade" property="isDegrade"/>
  </resultMap>

  <!-- 按主键查询数据 -->
  <select id="selectByPK" resultType="com.welearn.entity.po.equipment.RepairRequest" parameterType="java.lang.String">
    SELECT
    <include refid="sqlColumns"/>
    FROM repair_request
    WHERE id = #{id}
  </select>

  <!-- 按条件查询数据 -->
  <select id="selectByCondition" resultType="com.welearn.entity.po.equipment.RepairRequest" parameterType="com.welearn.entity.qo.equipment.RepairRequestQueryCondition" >
    SELECT
    <include refid="sqlColumns"/>
    FROM repair_request
    <where>
      <if test="id != null" >
        id = #{id}
      </if>
      <if test="createdAt != null" >
        AND createdAt = #{createdAt}
      </if>
      <if test="createdAtLessThan != null" >
        AND #{createdAtLessThan} > createdAt
      </if>
      <if test="createdAtGreaterThan != null" >
        AND createdAt >= #{createdAtGreaterThan}
      </if>
      <if test="updatedAt != null" >
        AND updatedAt = #{updatedAt}
      </if>
      <if test="isEnable != null" >
        AND isEnable = #{isEnable}
      </if>
      <if test="equipmentId != null" >
        AND equipmentId = #{equipmentId}
      </if>
      <if test="equipmentName != null" >
        AND equipmentName = #{equipmentName}
      </if>
      <if test="equipmentTypeId != null" >
        AND equipmentTypeId = #{equipmentTypeId}
      </if>
      <if test="equipmentTypeName != null" >
        AND equipmentTypeName = #{equipmentTypeName}
      </if>
      <if test="guaranteeRepairExpiredAt != null" >
        AND guaranteeRepairExpiredAt = #{guaranteeRepairExpiredAt}
      </if>
      <if test="reporterId != null" >
        AND reporterId = #{reporterId}
      </if>
      <if test="reporterName != null" >
        AND reporterName = #{reporterName}
      </if>
      <if test="reporterPhone != null" >
        AND reporterPhone = #{reporterPhone}
      </if>
      <if test="reporterDepartmentId != null" >
        AND reporterDepartmentId = #{reporterDepartmentId}
      </if>
      <if test="reporterDepartmentName != null" >
        AND reporterDepartmentName = #{reporterDepartmentName}
      </if>
      <if test="reporterCompanyId != null" >
        AND reporterCompanyId = #{reporterCompanyId}
      </if>
      <if test="reporterCompanyName != null" >
        AND reporterCompanyName = #{reporterCompanyName}
      </if>
      <if test="serveCompanyId != null" >
        AND serveCompanyId = #{serveCompanyId}
      </if>
      <if test="serveCompanyName != null" >
        AND serveCompanyName = #{serveCompanyName}
      </if>
      <if test="preceptId != null" >
        AND preceptId = #{preceptId}
      </if>
      <if test="description != null" >
        AND description = #{description}
      </if>
      <if test="picture != null" >
        AND picture = #{picture}
      </if>
      <if test="lever != null" >
        AND lever = #{lever}
      </if>
      <if test="sort != null" >
        AND sort = #{sort}
      </if>
      <if test="status != null" >
        AND status = #{status}
      </if>
      <if test="isReal != null" >
        AND isReal = #{isReal}
      </if>
      <if test="isCancel != null" >
        AND isCancel = #{isCancel}
      </if>
      <if test="isPartRepalce != null" >
        AND isPartRepalce = #{isPartRepalce}
      </if>
      <if test="isPartWaiting != null" >
        AND isPartWaiting = #{isPartWaiting}
      </if>
      <if test="isHelpApply != null" >
        AND isHelpApply = #{isHelpApply}
      </if>
      <if test="isWarranty != null" >
        AND isWarranty = #{isWarranty}
      </if>
      <if test="isSummarize != null" >
        AND isSummarize = #{isSummarize}
      </if>
      <if test="remark != null" >
        AND remark = #{remark}
      </if>
      <if test="finishedAt != null" >
        AND finishedAt = #{finishedAt}
      </if>
      <if test="isSuggestScrap != null" >
        AND isSuggestScrap = #{isSuggestScrap}
      </if>
      <if test="isDegrade != null" >
        AND isDegrade = #{isDegrade}
      </if>
      <!-- START USER DEFINED -->

      <!-- End USER DEFINED -->
    </where>
    ORDER BY createdAt ASC, updatedAt DESC
  </select>

  <!-- 查询所有数据 -->
  <select id="selectAll" resultType="com.welearn.entity.po.equipment.RepairRequest" >
    SELECT
    <include refid="sqlColumns"/>
    FROM repair_request
  </select>

  <!-- 获取数据条数 -->
  <select id="countAll" resultType="java.lang.Integer" >
    SELECT count(id)
    FROM repair_request
  </select>

  <!-- 更新数据（全部） -->
  <update id="updateByPK" parameterType="com.welearn.entity.po.equipment.RepairRequest" >
    UPDATE repair_request
    <set>
      createdAt = #{createdAt},
      updatedAt = #{updatedAt},
      isEnable = #{isEnable},
      equipmentId = #{equipmentId},
      equipmentName = #{equipmentName},
      equipmentTypeId = #{equipmentTypeId},
      equipmentTypeName = #{equipmentTypeName},
      guaranteeRepairExpiredAt = #{guaranteeRepairExpiredAt},
      reporterId = #{reporterId},
      reporterName = #{reporterName},
      reporterPhone = #{reporterPhone},
      reporterDepartmentId = #{reporterDepartmentId},
      reporterDepartmentName = #{reporterDepartmentName},
      reporterCompanyId = #{reporterCompanyId},
      reporterCompanyName = #{reporterCompanyName},
      serveCompanyId = #{serveCompanyId},
      serveCompanyName = #{serveCompanyName},
      preceptId = #{preceptId},
      description = #{description},
      picture = #{picture},
      lever = #{lever},
      sort = #{sort},
      status = #{status},
      isReal = #{isReal},
      isCancel = #{isCancel},
      isPartRepalce = #{isPartRepalce},
      isPartWaiting = #{isPartWaiting},
      isHelpApply = #{isHelpApply},
      isWarranty = #{isWarranty},
      isSummarize = #{isSummarize},
      remark = #{remark},
      finishedAt = #{finishedAt},
      isSuggestScrap = #{isSuggestScrap},
      isDegrade = #{isDegrade},
    </set>
    WHERE id = #{id}
  </update>

  <!-- 更新数据（选择） -->
  <update id="updateByPKSelective" parameterType="com.welearn.entity.po.equipment.RepairRequest" >
    UPDATE repair_request
    <set>
      <if test="createdAt != null" >
        createdAt = #{createdAt},
      </if>
      <if test="updatedAt != null" >
        updatedAt = #{updatedAt},
      </if>
      <if test="isEnable != null" >
        isEnable = #{isEnable},
      </if>
      <if test="equipmentId != null" >
        equipmentId = #{equipmentId},
      </if>
      <if test="equipmentName != null" >
        equipmentName = #{equipmentName},
      </if>
      <if test="equipmentTypeId != null" >
        equipmentTypeId = #{equipmentTypeId},
      </if>
      <if test="equipmentTypeName != null" >
        equipmentTypeName = #{equipmentTypeName},
      </if>
      <if test="guaranteeRepairExpiredAt != null" >
        guaranteeRepairExpiredAt = #{guaranteeRepairExpiredAt},
      </if>
      <if test="reporterId != null" >
        reporterId = #{reporterId},
      </if>
      <if test="reporterName != null" >
        reporterName = #{reporterName},
      </if>
      <if test="reporterPhone != null" >
        reporterPhone = #{reporterPhone},
      </if>
      <if test="reporterDepartmentId != null" >
        reporterDepartmentId = #{reporterDepartmentId},
      </if>
      <if test="reporterDepartmentName != null" >
        reporterDepartmentName = #{reporterDepartmentName},
      </if>
      <if test="reporterCompanyId != null" >
        reporterCompanyId = #{reporterCompanyId},
      </if>
      <if test="reporterCompanyName != null" >
        reporterCompanyName = #{reporterCompanyName},
      </if>
      <if test="serveCompanyId != null" >
        serveCompanyId = #{serveCompanyId},
      </if>
      <if test="serveCompanyName != null" >
        serveCompanyName = #{serveCompanyName},
      </if>
      <if test="preceptId != null" >
        preceptId = #{preceptId},
      </if>
      <if test="description != null" >
        description = #{description},
      </if>
      <if test="picture != null" >
        picture = #{picture},
      </if>
      <if test="lever != null" >
        lever = #{lever},
      </if>
      <if test="sort != null" >
        sort = #{sort},
      </if>
      <if test="status != null" >
        status = #{status},
      </if>
      <if test="isReal != null" >
        isReal = #{isReal},
      </if>
      <if test="isCancel != null" >
        isCancel = #{isCancel},
      </if>
      <if test="isPartRepalce != null" >
        isPartRepalce = #{isPartRepalce},
      </if>
      <if test="isPartWaiting != null" >
        isPartWaiting = #{isPartWaiting},
      </if>
      <if test="isHelpApply != null" >
        isHelpApply = #{isHelpApply},
      </if>
      <if test="isWarranty != null" >
        isWarranty = #{isWarranty},
      </if>
      <if test="isSummarize != null" >
        isSummarize = #{isSummarize},
      </if>
      <if test="remark != null" >
        remark = #{remark},
      </if>
      <if test="finishedAt != null" >
        finishedAt = #{finishedAt},
      </if>
      <if test="isSuggestScrap != null" >
        isSuggestScrap = #{isSuggestScrap},
      </if>
      <if test="isDegrade != null" >
        isDegrade = #{isDegrade},
      </if>
    </set>
    WHERE id = #{id}
  </update>

  <!-- 启用 -->
  <update id="enable" parameterType="java.lang.String" >
    UPDATE repair_request SET isEnable = TRUE WHERE id = #{id}
  </update>

  <!-- 禁用 -->
  <update id="disable" parameterType="java.lang.String" >
    UPDATE repair_request SET isEnable = FALSE WHERE id = #{id}
  </update>

  <!-- 添加数据（全部） -->
  <insert id="insert" parameterType="com.welearn.entity.po.equipment.RepairRequest" useGeneratedKeys="true" keyProperty="id" >
    INSERT INTO repair_request
    <trim prefix="(" suffix=")" suffixOverrides="," >
      id,
      createdAt,
      updatedAt,
      isEnable,
      equipmentId,
      equipmentName,
      equipmentTypeId,
      equipmentTypeName,
      guaranteeRepairExpiredAt,
      reporterId,
      reporterName,
      reporterPhone,
      reporterDepartmentId,
      reporterDepartmentName,
      reporterCompanyId,
      reporterCompanyName,
      serveCompanyId,
      serveCompanyName,
      preceptId,
      description,
      picture,
      lever,
      sort,
      status,
      isReal,
      isCancel,
      isPartRepalce,
      isPartWaiting,
      isHelpApply,
      isWarranty,
      isSummarize,
      remark,
      finishedAt,
      isSuggestScrap,
      isDegrade,
    </trim>
    <trim prefix="VALUES (" suffix=")" suffixOverrides="," >
      #{id},
      #{createdAt},
      #{updatedAt},
      #{isEnable},
      #{equipmentId},
      #{equipmentName},
      #{equipmentTypeId},
      #{equipmentTypeName},
      #{guaranteeRepairExpiredAt},
      #{reporterId},
      #{reporterName},
      #{reporterPhone},
      #{reporterDepartmentId},
      #{reporterDepartmentName},
      #{reporterCompanyId},
      #{reporterCompanyName},
      #{serveCompanyId},
      #{serveCompanyName},
      #{preceptId},
      #{description},
      #{picture},
      #{lever},
      #{sort},
      #{status},
      #{isReal},
      #{isCancel},
      #{isPartRepalce},
      #{isPartWaiting},
      #{isHelpApply},
      #{isWarranty},
      #{isSummarize},
      #{remark},
      #{finishedAt},
      #{isSuggestScrap},
      #{isDegrade},
    </trim>
  </insert>

  <!-- 添加数据（选择） -->
  <insert id="insertSelective" parameterType="com.welearn.entity.po.equipment.RepairRequest" useGeneratedKeys="true" keyProperty="id" >
    INSERT INTO repair_request
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="createdAt != null" >
        createdAt,
      </if>
      <if test="updatedAt != null" >
        updatedAt,
      </if>
      <if test="isEnable != null" >
        isEnable,
      </if>
      <if test="equipmentId != null" >
        equipmentId,
      </if>
      <if test="equipmentName != null" >
        equipmentName,
      </if>
      <if test="equipmentTypeId != null" >
        equipmentTypeId,
      </if>
      <if test="equipmentTypeName != null" >
        equipmentTypeName,
      </if>
      <if test="guaranteeRepairExpiredAt != null" >
        guaranteeRepairExpiredAt,
      </if>
      <if test="reporterId != null" >
        reporterId,
      </if>
      <if test="reporterName != null" >
        reporterName,
      </if>
      <if test="reporterPhone != null" >
        reporterPhone,
      </if>
      <if test="reporterDepartmentId != null" >
        reporterDepartmentId,
      </if>
      <if test="reporterDepartmentName != null" >
        reporterDepartmentName,
      </if>
      <if test="reporterCompanyId != null" >
        reporterCompanyId,
      </if>
      <if test="reporterCompanyName != null" >
        reporterCompanyName,
      </if>
      <if test="serveCompanyId != null" >
        serveCompanyId,
      </if>
      <if test="serveCompanyName != null" >
        serveCompanyName,
      </if>
      <if test="preceptId != null" >
        preceptId,
      </if>
      <if test="description != null" >
        description,
      </if>
      <if test="picture != null" >
        picture,
      </if>
      <if test="lever != null" >
        lever,
      </if>
      <if test="sort != null" >
        sort,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="isReal != null" >
        isReal,
      </if>
      <if test="isCancel != null" >
        isCancel,
      </if>
      <if test="isPartRepalce != null" >
        isPartRepalce,
      </if>
      <if test="isPartWaiting != null" >
        isPartWaiting,
      </if>
      <if test="isHelpApply != null" >
        isHelpApply,
      </if>
      <if test="isWarranty != null" >
        isWarranty,
      </if>
      <if test="isSummarize != null" >
        isSummarize,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="finishedAt != null" >
        finishedAt,
      </if>
      <if test="isSuggestScrap != null" >
        isSuggestScrap,
      </if>
      <if test="isDegrade != null" >
        isDegrade,
      </if>
    </trim>
    <trim prefix="VALUES (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id},
      </if>
      <if test="createdAt != null" >
        #{createdAt},
      </if>
      <if test="updatedAt != null" >
        #{updatedAt},
      </if>
      <if test="isEnable != null" >
        #{isEnable},
      </if>
      <if test="equipmentId != null" >
        #{equipmentId},
      </if>
      <if test="equipmentName != null" >
        #{equipmentName},
      </if>
      <if test="equipmentTypeId != null" >
        #{equipmentTypeId},
      </if>
      <if test="equipmentTypeName != null" >
        #{equipmentTypeName},
      </if>
      <if test="guaranteeRepairExpiredAt != null" >
        #{guaranteeRepairExpiredAt},
      </if>
      <if test="reporterId != null" >
        #{reporterId},
      </if>
      <if test="reporterName != null" >
        #{reporterName},
      </if>
      <if test="reporterPhone != null" >
        #{reporterPhone},
      </if>
      <if test="reporterDepartmentId != null" >
        #{reporterDepartmentId},
      </if>
      <if test="reporterDepartmentName != null" >
        #{reporterDepartmentName},
      </if>
      <if test="reporterCompanyId != null" >
        #{reporterCompanyId},
      </if>
      <if test="reporterCompanyName != null" >
        #{reporterCompanyName},
      </if>
      <if test="serveCompanyId != null" >
        #{serveCompanyId},
      </if>
      <if test="serveCompanyName != null" >
        #{serveCompanyName},
      </if>
      <if test="preceptId != null" >
        #{preceptId},
      </if>
      <if test="description != null" >
        #{description},
      </if>
      <if test="picture != null" >
        #{picture},
      </if>
      <if test="lever != null" >
        #{lever},
      </if>
      <if test="sort != null" >
        #{sort},
      </if>
      <if test="status != null" >
        #{status},
      </if>
      <if test="isReal != null" >
        #{isReal},
      </if>
      <if test="isCancel != null" >
        #{isCancel},
      </if>
      <if test="isPartRepalce != null" >
        #{isPartRepalce},
      </if>
      <if test="isPartWaiting != null" >
        #{isPartWaiting},
      </if>
      <if test="isHelpApply != null" >
        #{isHelpApply},
      </if>
      <if test="isWarranty != null" >
        #{isWarranty},
      </if>
      <if test="isSummarize != null" >
        #{isSummarize},
      </if>
      <if test="remark != null" >
        #{remark},
      </if>
      <if test="finishedAt != null" >
        #{finishedAt},
      </if>
      <if test="isSuggestScrap != null" >
        #{isSuggestScrap},
      </if>
      <if test="isDegrade != null" >
        #{isDegrade},
      </if>
    </trim>
  </insert>

  <!-- 根据主键删除 -->
  <delete id="deleteByPK" parameterType="java.lang.String" >
    DELETE FROM repair_request WHERE id = #{id}
  </delete>

  <!-- 删除全部数据 -->
  <delete id="deleteAll">
    DELETE FROM repair_request
  </delete>


  <!-- START USER DEFINED -->
  <select id="repairCostStatistic" resultType="com.welearn.entity.dto.equipment.RepairRequestStatistic">
    select rr.id, rr.status, rr.createdAt, rr.finishedAt, rr.isHelpApply, rr.isWarranty,
           rr.reporterDepartmentId as departmentId, rr.reporterDepartmentName as departmentName
    from repair_request rr
    where  rr.isEnable = true
      <if test="companyId != null" >
        and rr.reporterCompanyId = #{companyId}
      </if>
      <if test="startAt != null" >
        and rr.createdAt > #{startAt}
      </if>
      <if test="equipmentId != null" >
        AND rr.equipmentId = #{equipmentId}
      </if>
  </select>
</mapper>